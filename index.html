<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link href="styles/tailwind.min.css" rel="stylesheet">
    <link rel="shortcut icon" href="icons/favicon.svg"/>
    <title>Audio Player</title>
    <style>
        #volume::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 1.25rem;
            height: 1.25rem;
            background: #1E3A8A;
            border-radius: 1.25rem;
            border: 0;
            cursor: pointer;
            transition: all .2s ease-out;
        }

        #volume::-webkit-slider-thumb:hover {
            transform: scale(1.25);
            background: #F59E0B;
        }

        #volume::-moz-range-thumb {
            width: 1.25rem;
            height: 1.25rem;
            background: #1E3A8A;
            border-radius: 1.25rem;
            border: 0;
            cursor: pointer;
            transition: all .2s ease-out;
        }

        #volume::-moz-range-thumb:hover {
            transform: scale(1.25);
            background: #F59E0B;
        }
    </style>
</head>
<body>

<audio id="audio" crossorigin="anonymous"></audio>

<div class="m-9 p-6 max-w-screen-md bg-blue-50 rounded-3xl space-y-9">
    <div id="visualization" class="w-full h-40 flex justify-center items-end"></div>

    <div id="songName" class="text-center h-20 text-3xl mb-9 overflow-x-scroll leading-10"></div>

    <div class="flex flex-col items-end">
        <div id="progressBarContainer"
             class="relative bg-gray-200 w-full rounded-full h-3.5 cursor-pointer overflow-hidden">
            <div id="progressBufferBar" class="bg-blue-200 h-full rounded-full absolute top-0 left-0"></div>
            <div id="progressBar" class="bg-yellow-500 h-full rounded-full absolute top-0 left-0"></div>
        </div>
        <div id="currentTime" class="font-mono text-sm"></div>
    </div>

    <div id="controls" class="flex flex-wrap justify-center items-center text-blue-900 fill-current">
        <svg id="previousButton"
             class="cursor-pointer w-12 h-12 hover:text-yellow-500 transform hover:scale-125 transition-all ease-out duration-200 m-4"
             viewBox="0 0 24 24">
            <path d="M7 6c.55 0 1 .45 1 1v10c0 .55-.45 1-1 1s-1-.45-1-1V7c0-.55.45-1 1-1zm3.66 6.82l5.77 4.07c.66.47 1.58-.01 1.58-.82V7.93c0-.81-.91-1.28-1.58-.82l-5.77 4.07c-.57.4-.57 1.24 0 1.64z"></path>
        </svg>

        <svg id="playPauseButton"
             class="cursor-pointer w-16 h-16 hover:text-yellow-500 transform hover:scale-125 transition-all ease-out duration-200 m-4"
             viewBox="0 0 24 24">
            <path id="playPath"
                  d="M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82z"></path>
            <path id="pausePath" class="hidden"
                  d="M8 19c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2v10c0 1.1.9 2 2 2zm6-12v10c0 1.1.9 2 2 2s2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2z"></path>
        </svg>

        <svg id="nextButton"
             class="cursor-pointer w-12 h-12 hover:text-yellow-500 transform hover:scale-125 transition-all ease-out duration-200 m-4"
             viewBox="0 0 24 24">
            <path d="M7.58 16.89l5.77-4.07c.56-.4.56-1.24 0-1.63L7.58 7.11C6.91 6.65 6 7.12 6 7.93v8.14c0 .81.91 1.28 1.58.82zM16 7v10c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1s-1 .45-1 1z"></path>
        </svg>

        <svg id="shuffleButton"
             class="cursor-pointer w-10 h-10 hover:text-yellow-500 transform hover:scale-125 transition-all ease-out duration-200 m-4"
             viewBox="0 0 24 24">
            <path d="M10.59 9.17L6.12 4.7a.9959.9959 0 00-1.41 0c-.39.39-.39 1.02 0 1.41l4.46 4.46 1.42-1.4zm4.76-4.32l1.19 1.19L4.7 17.88c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L17.96 7.46l1.19 1.19c.31.31.85.09.85-.36V4.5c0-.28-.22-.5-.5-.5h-3.79c-.45 0-.67.54-.36.85zm-.52 8.56l-1.41 1.41 3.13 3.13-1.2 1.2c-.31.31-.09.85.36.85h3.79c.28 0 .5-.22.5-.5v-3.79c0-.45-.54-.67-.85-.35l-1.19 1.19-3.13-3.14z"></path>
        </svg>

        <svg id="volumeIcon"
             class="cursor-pointer w-12 h-12 hover:text-yellow-500 transform hover:scale-125 transition-all ease-out duration-200 m-4"
             viewBox="0 0 24 24">
            <path id="volumeMutePath" class="hidden"
                  d="M3.63 3.63c-.39.39-.39 1.02 0 1.41L7.29 8.7 7 9H4c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71v-4.17l4.18 4.18c-.49.37-1.02.68-1.6.91-.36.15-.58.53-.58.92 0 .72.73 1.18 1.39.91.8-.33 1.55-.77 2.22-1.31l1.34 1.34c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L5.05 3.63c-.39-.39-1.02-.39-1.42 0zM19 12c0 .82-.15 1.61-.41 2.34l1.53 1.53c.56-1.17.88-2.48.88-3.87 0-3.83-2.4-7.11-5.78-8.4-.59-.23-1.22.23-1.22.86v.19c0 .38.25.71.61.85C17.18 6.54 19 9.06 19 12zm-8.71-6.29l-.17.17L12 7.76V6.41c0-.89-1.08-1.33-1.71-.7zM16.5 12c0-1.77-1.02-3.29-2.5-4.03v1.79l2.48 2.48c.01-.08.02-.16.02-.24z"></path>
            <path id="volumeHalfPath" class="hidden" transform="translate(-2, 0)"
                  d="M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 10v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71V6.41c0-.89-1.08-1.34-1.71-.71L9 9H6c-.55 0-1 .45-1 1z"></path>
            <path id="volumeFullPath"
                  d="M3 10v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71V6.41c0-.89-1.08-1.34-1.71-.71L7 9H4c-.55 0-1 .45-1 1zm13.5 2c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 4.45v.2c0 .38.25.71.6.85C17.18 6.53 19 9.06 19 12s-1.82 5.47-4.4 6.5c-.36.14-.6.47-.6.85v.2c0 .63.63 1.07 1.21.85C18.6 19.11 21 15.84 21 12s-2.4-7.11-5.79-8.4c-.58-.23-1.21.22-1.21.85z"></path>
        </svg>

        <input type="range" id="volume" value="1.0" min="0" max="1.5" step="0.01"
               class="w-40 cursor-pointer outline-none my-6 appearance-none bg-blue-200 h-2 rounded-full">

    </div>

    <div id="songList"></div>

    <div id="songTemplate"
         class="song hidden cursor-pointer px-9 py-3 hover:bg-blue-200 transition-all ease-in-out duration-300 rounded-2xl bg-opacity-30 flex justify-between items-center">
        <div class="songName">
            Song Name
        </div>
        <div class="songControls flex items-center text-blue-900 fill-current">
            <svg class="w-7 h-7 removeButton cursor-pointer hover:text-yellow-500 transform hover:scale-125 transition-all ease-out duration-200 mx-1"
                 viewBox="0 0 24 24">
                <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v10zm3.17-7.83c.39-.39 1.02-.39 1.41 0L12 12.59l1.42-1.42c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41L13.41 14l1.42 1.42c.39.39.39 1.02 0 1.41-.39.39-1.02.39-1.41 0L12 15.41l-1.42 1.42c-.39.39-1.02.39-1.41 0a.9959.9959 0 010-1.41L10.59 14l-1.42-1.42c-.39-.38-.39-1.02 0-1.41zM15.5 4l-.71-.71c-.18-.18-.44-.29-.7-.29H9.91c-.26 0-.52.11-.7.29L8.5 4H6c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1h-2.5z"></path>
            </svg>
            <svg class="w-7 h-7 moveUpButton cursor-pointer hover:text-yellow-500 transform hover:scale-125 transition-all ease-out duration-200 mx-1"
                 viewBox="0 0 24 24">
                <path d="M13 19V7.83l4.88 4.88c.39.39 1.03.39 1.42 0 .39-.39.39-1.02 0-1.41l-6.59-6.59a.9959.9959 0 00-1.41 0l-6.6 6.58c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L11 7.83V19c0 .55.45 1 1 1s1-.45 1-1z"></path>
            </svg>
            <svg class="w-7 h-7 moveDownButton cursor-pointer hover:text-yellow-500 transform hover:scale-125 transition-all ease-out duration-200 mx-1"
                 viewBox="0 0 24 24">
                <path d="M11 5v11.17l-4.88-4.88c-.39-.39-1.03-.39-1.42 0-.39.39-.39 1.02 0 1.41l6.59 6.59c.39.39 1.02.39 1.41 0l6.59-6.59c.39-.39.39-1.02 0-1.41a.9959.9959 0 00-1.41 0L13 16.17V5c0-.55-.45-1-1-1s-1 .45-1 1z"></path>
            </svg>
        </div>
    </div>

    <div id="addFileContainer">

        <div id="addFileTabs" class="flex">
            <div id="webFileTabButton"
                 class="bg-blue-200 border-t-2 border-l-2 border-r-2 border-blue-200 rounded-t-2xl px-4 py-2 mr-0.5 transition-all ease-in-out duration-300 hover:bg-blue-200 cursor-pointer">
                Web
            </div>
            <div id="localFileTabButton"
                 class="border-t-2 border-l-2 border-r-2 border-blue-200 rounded-t-2xl px-4 py-2 mx-0.5 transition-all ease-in-out duration-300 hover:bg-blue-200 cursor-pointer">
                Your Computer
            </div>
            <div id="internetArchiveTabButton"
                 class="border-t-2 border-l-2 border-r-2 border-blue-200 rounded-t-2xl px-4 py-2 mx-0.5 transition-all ease-in-out duration-300 hover:bg-blue-200 cursor-pointer">
                Internet Archive
            </div>
            <div id="freeMusicArchiveTabButton"
                 class="border-t-2 border-l-2 border-r-2 border-blue-200 rounded-t-2xl px-4 py-2 mx-0.5 transition-all ease-in-out duration-300 hover:bg-blue-200 cursor-pointer">
                Free Music Archive
            </div>
        </div>

        <div id="webFileTab"
             class="bg-blue-200 p-3 space-y-2 border-2 border-blue-200 rounded-2xl rounded-tl-none">
            <div class="m-1">
                Add file from web url:
            </div>
            <div class="flex flex-wrap items-center">
                <div class="m-1">
                    <input id="addSongFromWebUrl" type="text" placeholder="url"
                           class="w-full rounded-full px-3 py-1.5 outline-none">
                </div>

                <div class="m-1">
                    <input id="addSongFromWebName" type="text" placeholder="name"
                           class="w-full rounded-full px-3 py-1.5 outline-none">
                </div>

                <button id="addSongFromWebButton"
                        class="px-3 py-1.5 m-1 bg-blue-900 text-blue-100 rounded-full transition-all ease-in-out duration-300 text-xs hover:bg-yellow-500">
                    ADD
                </button>
            </div>
            <div class="text-xs opacity-70">
                <p>The hosting server must allow cross-origin resource sharing.</p>
                <p>The <a href="https://archive.org" target="_blank" class="text-blue-700">Internet
                    Archive</a>, for example, is a good source of audio files.</p>
            </div>
        </div>

        <div id="localFileTab"
             class="bg-blue-200 p-3 space-y-2 border-2 border-blue-200 rounded-2xl rounded-tl-none hidden">
            <div class="m-1">
                Add files from your computer:
            </div>
            <div class="flex flex-wrap items-center">
                <input id="localFileInput" type="file" multiple>

                <button id="addSongLocalButton"
                        class="px-3 py-1.5 m-1 bg-blue-900 text-blue-100 rounded-full transition-all ease-in-out duration-300 text-xs hover:bg-yellow-500">
                    ADD
                </button>
            </div>
        </div>

        <div id="internetArchiveTab"
             class="bg-blue-200 p-3 space-y-2 border-2 border-blue-200 rounded-2xl rounded-tl-none hidden">
            <div class="m-1">
                Add files from Internet Archive:
            </div>

            <div class="flex items-center">
                <input id="internetArchiveSearchInput" type="text" class="rounded-full px-3 py-1.5 outline-none">

                <button id="internetArchiveSearchButton"
                        class="px-3 py-2 m-2 bg-blue-900 text-blue-100 rounded-full transition-all ease-in-out duration-300 text-xs hover:bg-yellow-500">
                    SEARCH
                </button>

                <svg id="internetArchiveSearchLoading" class="hidden animate-spin h-9 w-9" viewBox="0 0 24 24">
                    <path d="M18.65 8.35l-2.79 2.79c-.32.32-.1.86.35.86H18c0 3.31-2.69 6-6 6-.79 0-1.56-.15-2.25-.44-.36-.15-.77-.04-1.04.23-.51.51-.33 1.37.34 1.64.91.37 1.91.57 2.95.57 4.42 0 8-3.58 8-8h1.79c.45 0 .67-.54.35-.85l-2.79-2.79c-.19-.2-.51-.2-.7-.01zM6 12c0-3.31 2.69-6 6-6 .79 0 1.56.15 2.25.44.36.15.77.04 1.04-.23.51-.51.33-1.37-.34-1.64C14.04 4.2 13.04 4 12 4c-4.42 0-8 3.58-8 8H2.21c-.45 0-.67.54-.35.85l2.79 2.79c.2.2.51.2.71 0l2.79-2.79c.31-.31.09-.85-.36-.85H6z"></path>
                </svg>

                <div id="internetArchiveSearchError" class="hidden text-red-500">
                    There was a problem searching the Internet Archive
                </div>
            </div>

            <div id="internetArchiveNoResults" class="hidden m-1">
                No results found
            </div>

            <div id="internetArchiveList"></div>

            <div id="pageControls" class="hidden flex text-xs">
                <div id="pageIndicator" class="p-2 m-2"></div>
                <div id="previousPage" class="cursor-pointer rounded-full bg-blue-100 p-2 m-2">PREVIOUS</div>
                <div id="nextPage" class="cursor-pointer rounded-full bg-blue-100 p-2 m-2">NEXT</div>
                <svg id="pageLoading" class="hidden animate-spin h-9 w-9 m-2" viewBox="0 0 24 24">
                    <path d="M18.65 8.35l-2.79 2.79c-.32.32-.1.86.35.86H18c0 3.31-2.69 6-6 6-.79 0-1.56-.15-2.25-.44-.36-.15-.77-.04-1.04.23-.51.51-.33 1.37.34 1.64.91.37 1.91.57 2.95.57 4.42 0 8-3.58 8-8h1.79c.45 0 .67-.54.35-.85l-2.79-2.79c-.19-.2-.51-.2-.7-.01zM6 12c0-3.31 2.69-6 6-6 .79 0 1.56.15 2.25.44.36.15.77.04 1.04-.23.51-.51.33-1.37-.34-1.64C14.04 4.2 13.04 4 12 4c-4.42 0-8 3.58-8 8H2.21c-.45 0-.67.54-.35.85l2.79 2.79c.2.2.51.2.71 0l2.79-2.79c.31-.31.09-.85-.36-.85H6z"></path>
                </svg>
                <div id="pageSearchError" class="hidden text-red-500 p-2 m-2">
                    There was a problem searching the Internet Archive
                </div>
            </div>

            <div id="internetArchiveItemTemplate" class="internetArchiveItem hidden">
                <div class="itemName px-2 py-1 cursor-pointer hover:bg-yellow-500 transition-all ease-in-out duration-300 rounded-2xl">
                    Item Name
                </div>
                <div class="filesContainer hidden mb-3 px-2 fill-current">
                    <svg class="loading hidden animate-spin h-9 w-9" viewBox="0 0 24 24">
                        <path d="M18.65 8.35l-2.79 2.79c-.32.32-.1.86.35.86H18c0 3.31-2.69 6-6 6-.79 0-1.56-.15-2.25-.44-.36-.15-.77-.04-1.04.23-.51.51-.33 1.37.34 1.64.91.37 1.91.57 2.95.57 4.42 0 8-3.58 8-8h1.79c.45 0 .67-.54.35-.85l-2.79-2.79c-.19-.2-.51-.2-.7-.01zM6 12c0-3.31 2.69-6 6-6 .79 0 1.56.15 2.25.44.36.15.77.04 1.04-.23.51-.51.33-1.37-.34-1.64C14.04 4.2 13.04 4 12 4c-4.42 0-8 3.58-8 8H2.21c-.45 0-.67.54-.35.85l2.79 2.79c.2.2.51.2.71 0l2.79-2.79c.31-.31.09-.85-.36-.85H6z"></path>
                    </svg>

                    <div class="filesError hidden text-red-500">
                        There was a problem listing files from the Internet Archive
                    </div>

                    <div class="noFiles hidden">
                        No files found
                    </div>

                    <div class="files"></div>
                </div>
            </div>

            <div id="fileTemplate" class="file hidden flex">
                <div class="fileControls text-blue-900 fill-current flex justify-center items-center">
                    <svg class="filePlayButton h-7 w-7 cursor-pointer hover:text-yellow-500 transform hover:scale-125 transition-all ease-out duration-200 mx-1"
                         viewBox="0 0 24 24">
                        <path d="M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82z"></path>
                    </svg>

                    <svg class="fileAddButton h-6 w-6 cursor-pointer hover:text-yellow-500 transform hover:scale-125 transition-all ease-out duration-200 mx-1"
                         viewBox="0 0 24 24">
                        <path d="M3 6c-.55 0-1 .45-1 1v13c0 1.1.9 2 2 2h13c.55 0 1-.45 1-1s-.45-1-1-1H5c-.55 0-1-.45-1-1V7c0-.55-.45-1-1-1zm17-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 9h-3v3c0 .55-.45 1-1 1s-1-.45-1-1v-3h-3c-.55 0-1-.45-1-1s.45-1 1-1h3V6c0-.55.45-1 1-1s1 .45 1 1v3h3c.55 0 1 .45 1 1s-.45 1-1 1z"></path>
                    </svg>
                </div>
                <div class="fileName mx-2 px-2 cursor-pointer hover:bg-yellow-500 transition-all ease-in-out duration-300 rounded-2xl">
                    File Name
                </div>
            </div>
        </div>

    </div>
</div>

<div class="text-xs m-12 p-6 max-w-screen-md space-y-2 text-center">
    <p>
        Music found at
        <a href="https://freemusicarchive.org" target="_blank" class="text-blue-700">freemusicarchive.org</a>
        is licensed under a
        <a href="https://creativecommons.org/licenses/by-sa/3.0/us/" target="_blank" class="text-blue-700">
            creative commons license.
        </a>
    </p>
    <p class="">
        View source at
        <a href="https://github.com/jason00111" target="_blank" class="text-blue-700">
            GitHub <img alt="View source on GitHub" src="icons/GitHub-Mark-64px.png" class="h-4 inline">
        </a>
    </p>
</div>

<script type="module" src="modules/index.js"></script>

</body>
</html>

<!-- todo
BUGS
fix buffer bar

NEW FEATURES
FMA?
ability to save playlist
save history?

CRITICAL IMPROVEMENTS
look good on mobile
provide some simple recommendations
  - Mélomane
handle cors error when loading file

IMPROVEMENTS
host cors proxy?
have cors proxy retry backups
show alt text for buttons? aria?
include files other than mp3
! don't play next song if song wasn't played from playlist
add pause button to IA files
add play next button to IA files
play/add all? x
seek 5 seconds?
use components?
 - loading
 - buttons
 - icons
ionic?
use templates
playback speed
arrow keys to search
space to play/pause

loading next to next button
handle no results
-->
